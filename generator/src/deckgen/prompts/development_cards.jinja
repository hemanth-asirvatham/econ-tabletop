You are generating a list of DevelopmentCard JSON objects using structured outputs.

{% if additional_instructions -%}
Additional instructions (must be followed carefully and woven into the cards):
{{ additional_instructions }}
{% endif -%}

Stage:
{{ stage | tojson }}

Simulation outline:
{{ outline_text }}

Allowed tags:
{{ tags | join(", ") }}

Beat plan (one card per beat, in order):
{{ beats | tojson }}

Required card ids (use these verbatim, in order):
{{ card_ids | tojson }}

Output JSON schema:
{
  "cards": [
    {
      "id": "string",
      "stage": 0,
      "title": "string",
      "short_description": "string",
      "description": "string",
      "rule_box_text": "string or null",
      "valence": "positive|negative|mixed",
      "impact_score": 0,
      "arrows_up": 0,
      "arrows_down": 0,
      "severity": 1,
      "card_type": "standard|power",
      "tags": ["string"],
      "thread_id": "string",
      "supersedes": "string or null",
      "activation": {
        "type": "immediate|conditional",
        "required_policy_tags": ["string"]
      },
      "effects": [
        {"type": "DRAW_DEV_NOW", "params": {"count": 2, "stage_offset": 0}}
      ],
      "art_prompt": "string",
      "suggested_visibility": "faceup|facedown|either"
    }
  ]
}

Constraints:
- Produce exactly one card per beat, in the same order as card_ids.
- Generate the full stage in one response; do not split or stream per-card outputs.
- Keep outcomes mutually exclusive within the stage: avoid duplicate or near-duplicate developments and effects.
- Keep outcomes grounded and stage-appropriate; avoid sci-fi leaps.
- Use the simulation outline to maintain an optimistic skew and stage-appropriate progressions.
- Write concrete, realistic titles/descriptions; avoid vague consulting-speak or academic obscurity.
- Keep descriptions accessible to a smart lay audience: minimize jargon and add a clarifying phrase if a term is niche.
- Frame each development as a world-state fact (what changed, who is affected, and how it shows up in everyday life).
- Favor broad, legible titles over overly specific program names; make the core idea instantly understandable.
- Ensure titles and short descriptions make the core impact obvious in plain language.
- Ensure many developments explicitly capture how AI is changing the world (primary or secondary effects), including geopolitics, labor, energy, or information flows.
- When relevant, connect power infrastructure realities (grid upgrades, shortages, fuel mix, pricing) to AI/data-center impacts.
- Include occasional feedback or constraint developments tied to prior policy choices (e.g., backlash, implementation drag, political fatigue).
- Include a wide spread of scale and domain (small operational shifts, sector-wide changes, infrastructure or governance impacts).
- Include some developments that are straightforward progress or new industry formation, driven by firms or markets rather than policy.
- Use 1-3 tags per card from the allowed list.
- Title: 2-4 words, simple and punchy (no subtitle, no colon).
- short_description: <= 60 characters; minimalist summary.
- description: 1 short sentence, <= 140 characters total (standard cards).
- Always include rule_box_text: use null when not needed.
- rule_box_text: optional for standard cards; use it for conditional bonuses, nullification clauses, or special scoring notes.
- For powerups: description is 1 short world-state sentence (<= 140 chars); rule_box_text is required and holds the imperative rule sentence (<= 80 chars).
- Respect any special_directive in the beat object (e.g., supersedes, conditional, powerup, quantitative_indicator).
- For supersedes: reference a prior-stage card id when possible (provided in the beat).
- If supersedes is set, include a plain-English clause in the description explaining what prior development is being replaced (do NOT include the raw card id).
- Avoid explicit references like "as in the previous card"; phrase supersedes naturally (e.g., "Early adoption stalls as...").
- For conditional: set activation.type=conditional and include at least one required_policy_tags item.
- For powerup: include a non-empty effects list with meaningful parameters.
- For powerup: include an explicit imperative rule sentence in rule_box_text (e.g., "Draw 2 development cards now.").
- Set card_type="power" for powerups; otherwise use card_type="standard".
- If card_type="standard" and rule_box_text is used, keep effects empty; use natural-language conditionals (e.g., "If prior policies expanded compute, add **+2** arrows.").
- For conditional: include a brief conditional clause in the description.
- Include at least 2 powerup cards per stage; prioritize common powerups:
  - Research acceleration: draw and play 2 development cards from the next stage (DRAW_DEV_NEXT_STAGE_NOW + count 2).
  - Research slowdown: remove the two highest-impact development cards from the next stage (express as a rule sentence; approximate by MODIFY_DEV_DRAW_NEXT_ROUND -2).
  - Policy bandwidth shifts: modify next round policy draw or max policies by ±1.
- Effects vocabulary (use one or two max):
  - DRAW_DEV_NOW {count, stage_offset}: immediately reveal additional development cards this round.
  - DRAW_DEV_NEXT_STAGE_NOW {count}: immediately reveal cards from the next stage.
  - MODIFY_DEV_DRAW_NEXT_ROUND {delta}: increase/decrease next round's development draw (research acceleration/slowdown).
  - MODIFY_POLICY_DRAW_NEXT_ROUND {delta}: increase/decrease next round's policy draw (policy bandwidth shifts).
  - MODIFY_MAX_POLICIES_THIS_ROUND {delta}: change how many policies can be implemented this round.
- For quantitative_indicator: include at least one numeric indicator in the short_description (e.g., "+1.5%" or "3x").
- If the card mentions a numeric or level parameter (e.g., % unemployment, low/moderate/high fear, dollar amounts), wrap the key value in **bold** (e.g., **10%**, **low**).
- impact_score: integer from -5 to 5 (0 allowed). Use mostly positive values; +/-4 and +/-5 should be rare and dramatic.
- Treat +3/-3 as already high; reserve +4/-4 for exceptional shifts and +5/-5 for rare, historic breaks.
- Spread impact_score magnitudes across 0–3 with only occasional 4s or 5s; do not cluster all cards at the same value.
- Map impact_score to icons: if >0 set arrows_up=impact_score; if <0 set arrows_down=abs(impact_score); if 0 set both to 0.
- Make the mapping explicit: impact_score=-2 means arrows_down=2 and arrows_up=0.
- Valence icons: never show both green and red; use only one direction or neutral.
- Do NOT include raw tag ids or underscore-separated terms in the description; use natural-language phrasing for conditions.
- art_prompt must specify an edge-to-edge landscape illustration that fills the entire frame with no empty margins or floating card.
- art_prompt should be a concise instruction for a horizontal card illustration (no need to include title text here; it will be added later).
- For power cards, the art_prompt should allow more minimalist, iconographic scenes with extra negative space (still full-bleed inside the card).
- Include some developments where private-sector coordination, market competition, or operational improvements resolve prior tensions without new policy.

Example development archetypes to inspire breadth (do NOT copy verbatim; keep stage-appropriate):
- Stage 0/1: "Uplift in Coding Productivity" (two green up arrows), "Public Fear" (**low**) with one red down arrow,
  "Lowered Language Barriers" (one green up arrow).
- Stage 2/3: "Companionship for Elderly" (one green up arrow), "Rising Energy Costs" (one red down arrow),
  "AI Research Acceleration" (powerup: draw **2** cards from next stage),
  "Fully Automated Computer-Based Work" (three green up arrows),
  "Job Loss" (**10%** unemployment in cognitive labor),
  "Autonomous Vehicles" (two green up arrows),
  "Export Control" (powerup: nullify best policy relying on foreign semi flows).
- Late stages: "Commonplace Personal Robotics" (three green up arrows), "Novel Medical Research" (positive).

Example (single card shown):
{
  "cards": [
    {
      "id": "dev_stage0_local_office_ai_copilots",
      "stage": 0,
      "title": "Office Copilots",
      "short_description": "Productivity lifts (**+1.2%**) in service teams.",
      "description": "Copilots speed routine work and lift output per worker.",
      "rule_box_text": null,
      "valence": "positive",
      "impact_score": 1,
      "arrows_up": 1,
      "arrows_down": 0,
      "severity": 3,
      "card_type": "standard",
      "tags": ["productivity_growth", "wage_dispersion"],
      "thread_id": "office_copilots",
      "supersedes": null,
      "activation": {"type": "immediate", "required_policy_tags": []},
      "effects": [],
      "art_prompt": "Edge-to-edge horizontal illustration of an office skyline with glowing AI overlays, fills the entire landscape frame, no readable text.",
      "suggested_visibility": "faceup"
    }
  ]
}
